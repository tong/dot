#!/bin/bash
#
# 'hr' - print a horizontal rule
#
# Usage: hr [char...]
# If no char is given, '#' is used.
# Multiple arguments will print multiple lines.

# Get terminal width, prioritizing $COLUMNS, then tput, then fallback to 80.
COLS=${COLUMNS:-0}
((COLS <= 0)) && COLS=$(tput cols)
((COLS <= 0)) && COLS=80

hr() {
  local char="$1"
  local line

  # Create a line of repeated characters.
  printf -v line '%*s' "$COLS" ''
  line="${line// /${char}}"

  # Print the line, truncated to the column width.
  printf "%.*s\n" "$COLS" "$line"
}

# Loop over arguments, or use '#' as a default.
# This allows calling 'hr - = ~' to print three different rulers.
for char in "${@:-#}"; do
  hr "$char"
done
