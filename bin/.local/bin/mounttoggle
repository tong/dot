#!/bin/sh
# HOST="pi"
# SRC="/mnt/hd4"
# DST="@hd4"
# MOUNT_SRC="$USER@$HOST:$SRC"
# MOUNT_DST="$HOME/$DST"
MOUNT_SRC=$1
MOUNT_DST=$2
if [ -d "$MOUNT_DST" ]; then
    if [ -z "$(ls -A "$MOUNT_DST")" ]; then
        echo "Mounting $MOUNT_DST <- $MOUNT_SRC"
        sshfs "$MOUNT_SRC" "$MOUNT_DST"
    else
        echo "Unmounting $MOUNT_DST"
        umount "$MOUNT_DST"
        rm -r "$MOUNT_DST"
    fi
else
    echo "Mounting $MOUNT_DST <- $MOUNT_SRC"
    mkdir -p "$MOUNT_DST"
    sshfs "$MOUNT_SRC" "$MOUNT_DST"
fi
